<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MWPC Analysis with eCDF/ePDF • COA34</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="MWPC Analysis with eCDF/ePDF">
<meta property="og:description" content="COA34">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">COA34</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a01_Introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/a02_Vignette_Item_Resp_Dist.html">Item Response Distribution</a>
    </li>
    <li>
      <a href="../articles/a03_Vignette_Test_Retest_Reliability.html">Test-Retest Reliability</a>
    </li>
    <li>
      <a href="../articles/a04_Vignette_Concurrent_Validity.html">Concurrent Validity</a>
    </li>
    <li>
      <a href="../articles/a05_Vignette_Known_Groups.html">Known Groups Validity</a>
    </li>
    <li>
      <a href="../articles/a06_Vignette_MWPC.html">MWPC Analysis with eCDF/ePDF</a>
    </li>
    <li>
      <a href="../articles/a07_Vignette_Scatterplots.html">Meaningful Change with Scatterplots</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="a06_Vignette_MWPC_files/header-attrs-2.9/header-attrs.js"></script><link href="a06_Vignette_MWPC_files/tabwid-1.0.0/tabwid.css" rel="stylesheet">
<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>MWPC Analysis with eCDF/ePDF</h1>
            
      
      
      <div class="hidden name"><code>a06_Vignette_MWPC.Rmd</code></div>

    </div>

    
    
<div id="mwpc-analysis-thresholds-ecdfs-epdfs-and-customization" class="section level2">
<h2 class="hasAnchor">
<a href="#mwpc-analysis-thresholds-ecdfs-epdfs-and-customization" class="anchor"></a>MWPC Analysis: Thresholds, eCDFs, ePDFs, and Customization</h2>
<p>Output eCDFs and ePDFs in alignment with FDA Guidance 3.</p>
</div>
<div id="required-r-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#required-r-packages" class="anchor"></a>Required R packages</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">COA34</span><span class="op">)</span>
<span class="co"># In addition, you'll need the following</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">gridExtra</span><span class="op">)</span></code></pre></div>
</div>
<div id="generate-data" class="section level2">
<h2 class="hasAnchor">
<a href="#generate-data" class="anchor"></a>Generate data</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R">
  <span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">12152021</span><span class="op">)</span>

  <span class="va">sim.out</span> <span class="op">&lt;-</span> <span class="fu">COA34</span><span class="fu">::</span><span class="fu"><a href="../reference/sim_pro_dat_v2.html">sim_pro_dat_v2</a></span><span class="op">(</span>N<span class="op">=</span><span class="fl">1000</span>,
                            number.timepoints <span class="op">=</span> <span class="fl">3</span>,
                            Beta.PRO <span class="op">=</span> <span class="cn">NULL</span>,
                            number.of.anchor.groups <span class="op">=</span> <span class="fl">5</span>,
                            polychor.value <span class="op">=</span> <span class="fl">0.7</span>,
                            corr <span class="op">=</span> <span class="st">'ar1'</span>,
                            cor.value <span class="op">=</span> <span class="fl">0.8</span>,
                            <span class="co">#var.values = c(7.136))</span>
                            var.values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span>
  <span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">sim.out</span><span class="op">$</span><span class="va">dat</span>

 </code></pre></div>
</div>
<div id="implement-drop-out" class="section level2">
<h2 class="hasAnchor">
<a href="#implement-drop-out" class="anchor"></a>Implement drop-out</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">COA34</span><span class="fu">::</span><span class="fu"><a href="../reference/dropout.html">dropout</a></span><span class="op">(</span>dat <span class="op">=</span> <span class="va">dat</span>,
               type_dropout  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'mcar'</span>, <span class="st">'mar'</span>, <span class="st">'mnar'</span><span class="op">)</span>,
               prop.miss <span class="op">=</span> <span class="fl">0.5</span>,
               stochastic.component <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></code></pre></div>
</div>
<div id="simulate-items" class="section level2">
<h2 class="hasAnchor">
<a href="#simulate-items" class="anchor"></a>Simulate Items</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R">
 <span class="co"># Simulate IRT items</span>
 <span class="co"># use the scores generated as the theta in the IRT model </span>
  <span class="va">sim.out2</span> <span class="op">&lt;-</span> <span class="fu">COA34</span><span class="fu">::</span><span class="fu"><a href="../reference/sim_irt_item.html">sim_irt_item</a></span><span class="op">(</span>dat <span class="op">=</span> <span class="va">dat</span>, J <span class="op">=</span> <span class="fl">5</span>, K <span class="op">=</span> <span class="fl">4</span>, latent.variable <span class="op">=</span> <span class="st">'Y_comp'</span><span class="op">)</span>
    <span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">sim.out2</span><span class="op">)</span>
<span class="co">#&gt; List of 3</span>
<span class="co">#&gt;  $ dat           :'data.frame':  3000 obs. of  22 variables:</span>
<span class="co">#&gt;   ..$ USUBJID   : chr [1:3000] "Subject_0001" "Subject_0001" "Subject_0001" "Subject_0002" ...</span>
<span class="co">#&gt;   ..$ Time      : Factor w/ 3 levels "Time_1","Time_2",..: 1 2 3 1 2 3 1 2 3 1 ...</span>
<span class="co">#&gt;   ..$ PGIS      : num [1:3000] 3 0 0 3 1 1 2 4 2 1 ...</span>
<span class="co">#&gt;   ..$ PGIS_bl   : num [1:3000] 3 3 3 3 3 3 2 2 2 1 ...</span>
<span class="co">#&gt;   ..$ PGIS_delta: num [1:3000] 0 -3 -3 0 -2 -2 0 2 0 0 ...</span>
<span class="co">#&gt;   ..$ ag        : num [1:3000] 0 -2 -2 0 -2 -2 0 2 0 0 ...</span>
<span class="co">#&gt;   ..$ XB        : num [1:3000] 4 3.5 2 4 3.5 2 3 3.5 3 2 ...</span>
<span class="co">#&gt;   ..$ error     : num [1:3000] 0.811 0.865 -0.112 -0.106 -0.525 ...</span>
<span class="co">#&gt;   ..$ Y_comp    : num [1:3000] 4.81 4.36 1.89 3.89 2.98 ...</span>
<span class="co">#&gt;   ..$ Val_1     : int [1:3000] 2 NA NA 1 NA NA 0 NA NA 2 ...</span>
<span class="co">#&gt;   ..$ Val_2     : num [1:3000] 4.97 NA NA 4.9 NA ...</span>
<span class="co">#&gt;   ..$ Val_3     : num [1:3000] 7.71 NA NA 5.43 NA ...</span>
<span class="co">#&gt;   ..$ Val_4     : num [1:3000] 4.4 NA NA 4.17 NA ...</span>
<span class="co">#&gt;   ..$ Val_5     : int [1:3000] 0 NA NA 3 NA NA 3 NA NA 1 ...</span>
<span class="co">#&gt;   ..$ Y_mcar    : num [1:3000] 4.81 4.36 NA 3.89 2.98 ...</span>
<span class="co">#&gt;   ..$ Y_mar     : num [1:3000] 4.81 NA NA 3.89 2.98 ...</span>
<span class="co">#&gt;   ..$ Y_mnar    : num [1:3000] 4.81 4.36 1.89 3.89 2.98 ...</span>
<span class="co">#&gt;   ..$ Item_1    : int [1:3000] 2 2 1 1 1 1 2 2 1 1 ...</span>
<span class="co">#&gt;   ..$ Item_2    : int [1:3000] 2 1 3 1 1 1 3 2 1 1 ...</span>
<span class="co">#&gt;   ..$ Item_3    : int [1:3000] 3 3 1 1 1 2 0 2 1 2 ...</span>
<span class="co">#&gt;   ..$ Item_4    : int [1:3000] 3 3 2 2 2 0 0 3 0 2 ...</span>
<span class="co">#&gt;   ..$ Item_5    : int [1:3000] 2 3 1 1 1 0 0 2 1 1 ...</span>
<span class="co">#&gt;  $ item.param    : num [1:5, 1:4] 2 2 2 2 2 -2 -2 -2 -2 -2 ...</span>
<span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span>
<span class="co">#&gt;   .. ..$ : chr [1:5] "Item_1" "Item_2" "Item_3" "Item_4" ...</span>
<span class="co">#&gt;   .. ..$ : chr [1:4] "slope" "intercept_1" "intercept_2" "intercept_3"</span>
<span class="co">#&gt;  $ item.responses:'data.frame':  3000 obs. of  5 variables:</span>
<span class="co">#&gt;   ..$ Item_1: int [1:3000] 2 2 1 1 1 1 2 2 1 1 ...</span>
<span class="co">#&gt;   ..$ Item_2: int [1:3000] 2 1 3 1 1 1 3 2 1 1 ...</span>
<span class="co">#&gt;   ..$ Item_3: int [1:3000] 3 3 1 1 1 2 0 2 1 2 ...</span>
<span class="co">#&gt;   ..$ Item_4: int [1:3000] 3 3 2 2 2 0 0 3 0 2 ...</span>
<span class="co">#&gt;   ..$ Item_5: int [1:3000] 2 3 1 1 1 0 0 2 1 1 ...</span>
    <span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">sim.out2</span><span class="op">$</span><span class="va">dat</span>

<span class="co"># Score the PRO - just take a simple sum score here:</span>
  <span class="va">dat</span><span class="op">$</span><span class="va">PRO.score</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">dat</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">'Item'</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">)</span><span class="op">]</span>, <span class="fl">1</span>, <span class="va">sum</span><span class="op">)</span>
  
<span class="co"># Create the same PRO score, but with MAR drop-out:</span>
  <span class="va">dat</span><span class="op">$</span><span class="va">PRO.score_mar</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">$</span><span class="va">PRO.score</span>
  <span class="va">dat</span><span class="op">$</span><span class="va">PRO.score_mar</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">Y_mar</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span>
<span class="co"># Note that you've just set the PRO score to missing wherever the Y_mar variable is missing</span>
  
<span class="co"># Now for the other missing types:</span>
    <span class="va">dat</span><span class="op">$</span><span class="va">PRO.score_mcar</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">$</span><span class="va">PRO.score_mnar</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">$</span><span class="va">PRO.score</span>
    <span class="va">dat</span><span class="op">$</span><span class="va">PRO.score_mcar</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">Y_mcar</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span>
    <span class="va">dat</span><span class="op">$</span><span class="va">PRO.score_mnar</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">Y_mnar</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span>

  <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">PRO.score</span>, <span class="va">PRO.score_mcar</span>, <span class="va">PRO.score_mar</span>, <span class="va">PRO.score_mnar</span><span class="op">)</span> <span class="op">~</span> <span class="va">Time</span>,
                  <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, 
                  data <span class="op">=</span> <span class="va">dat</span>, 
                  na.action <span class="op">=</span> <span class="va">na.pass</span><span class="op">)</span>
<span class="co">#&gt;     Time PRO.score PRO.score_mcar PRO.score_mar PRO.score_mnar</span>
<span class="co">#&gt; 1 Time_1     7.475       7.475000         7.475          7.475</span>
<span class="co">#&gt; 2 Time_2     7.475       7.405333         5.964          5.800</span>
<span class="co">#&gt; 3 Time_3     7.464       7.530000         5.206          4.124</span></code></pre></div>
</div>
<div id="compute-pgis-delta" class="section level2">
<h2 class="hasAnchor">
<a href="#compute-pgis-delta" class="anchor"></a>Compute PGIS delta</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># You already have the PGIS_bl and PGIS_delta in the generated data,</span>
<span class="co"># you wouldn't have that in a real dataset, so drop that first</span>
<span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">[</span>, <span class="op">!</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'PGIS_bl'</span>, <span class="st">'PGIS_delta'</span><span class="op">)</span><span class="op">)</span><span class="op">]</span>
<span class="co"># This makes this more realistic</span>
<span class="co"># use the function below:</span>

<span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">COA34</span><span class="fu">::</span><span class="fu"><a href="../reference/compute_anchor_delta.html">compute_anchor_delta</a></span><span class="op">(</span>dat <span class="op">=</span> <span class="va">dat</span>,
                                   subject.id <span class="op">=</span> <span class="st">'USUBJID'</span>,
                                   time.var <span class="op">=</span> <span class="st">'Time'</span>,
                                   anchor <span class="op">=</span> <span class="st">'PGIS'</span><span class="op">)</span></code></pre></div>
</div>
<div id="compute-pro-score-delta" class="section level2">
<h2 class="hasAnchor">
<a href="#compute-pro-score-delta" class="anchor"></a>Compute PRO Score delta</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">COA34</span><span class="fu">::</span><span class="fu"><a href="../reference/compute_change_score.html">compute_change_score</a></span><span class="op">(</span>dat <span class="op">=</span> <span class="va">dat</span>,
                                   subject.id <span class="op">=</span> <span class="st">'USUBJID'</span>,
                                   time.var <span class="op">=</span> <span class="st">'Time'</span>,
                                   score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'PRO.score'</span>, <span class="st">'PRO.score_mcar'</span>, 
                                             <span class="st">'PRO.score_mar'</span>, <span class="st">'PRO.score_mnar'</span><span class="op">)</span><span class="op">)</span>

<span class="co"># The function creates variables with the same name plus "_delta":</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span>
<span class="co">#&gt; 'data.frame':    3000 obs. of  34 variables:</span>
<span class="co">#&gt;  $ USUBJID             : chr  "Subject_0001" "Subject_0001" "Subject_0001" "Subject_0002" ...</span>
<span class="co">#&gt;  $ Time                : Factor w/ 3 levels "Time_1","Time_2",..: 1 2 3 1 2 3 1 2 3 1 ...</span>
<span class="co">#&gt;  $ PGIS                : num  3 0 0 3 1 1 2 4 2 1 ...</span>
<span class="co">#&gt;  $ ag                  : num  0 -2 -2 0 -2 -2 0 2 0 0 ...</span>
<span class="co">#&gt;  $ XB                  : num  4 3.5 2 4 3.5 2 3 3.5 3 2 ...</span>
<span class="co">#&gt;  $ error               : num  0.811 0.865 -0.112 -0.106 -0.525 ...</span>
<span class="co">#&gt;  $ Y_comp              : num  4.81 4.36 1.89 3.89 2.98 ...</span>
<span class="co">#&gt;  $ Val_1               : int  2 NA NA 1 NA NA 0 NA NA 2 ...</span>
<span class="co">#&gt;  $ Val_2               : num  4.97 NA NA 4.9 NA ...</span>
<span class="co">#&gt;  $ Val_3               : num  7.71 NA NA 5.43 NA ...</span>
<span class="co">#&gt;  $ Val_4               : num  4.4 NA NA 4.17 NA ...</span>
<span class="co">#&gt;  $ Val_5               : int  0 NA NA 3 NA NA 3 NA NA 1 ...</span>
<span class="co">#&gt;  $ Y_mcar              : num  4.81 4.36 NA 3.89 2.98 ...</span>
<span class="co">#&gt;  $ Y_mar               : num  4.81 NA NA 3.89 2.98 ...</span>
<span class="co">#&gt;  $ Y_mnar              : num  4.81 4.36 1.89 3.89 2.98 ...</span>
<span class="co">#&gt;  $ Item_1              : int  2 2 1 1 1 1 2 2 1 1 ...</span>
<span class="co">#&gt;  $ Item_2              : int  2 1 3 1 1 1 3 2 1 1 ...</span>
<span class="co">#&gt;  $ Item_3              : int  3 3 1 1 1 2 0 2 1 2 ...</span>
<span class="co">#&gt;  $ Item_4              : int  3 3 2 2 2 0 0 3 0 2 ...</span>
<span class="co">#&gt;  $ Item_5              : int  2 3 1 1 1 0 0 2 1 1 ...</span>
<span class="co">#&gt;  $ PRO.score           : int  12 12 8 6 6 4 5 11 4 7 ...</span>
<span class="co">#&gt;  $ PRO.score_mar       : int  12 NA NA 6 6 4 5 11 NA 7 ...</span>
<span class="co">#&gt;  $ PRO.score_mnar      : int  12 12 8 6 6 4 5 11 4 7 ...</span>
<span class="co">#&gt;  $ PRO.score_mcar      : int  12 12 NA 6 6 4 5 11 NA 7 ...</span>
<span class="co">#&gt;  $ PGIS_bl             : num  3 3 3 3 3 3 2 2 2 1 ...</span>
<span class="co">#&gt;  $ PGIS_delta          : num  0 -3 -3 0 -2 -2 0 2 0 0 ...</span>
<span class="co">#&gt;  $ PRO.score_bl        : int  12 12 12 6 6 6 5 5 5 7 ...</span>
<span class="co">#&gt;  $ PRO.score_mcar_bl   : int  12 12 12 6 6 6 5 5 5 7 ...</span>
<span class="co">#&gt;  $ PRO.score_mar_bl    : int  12 12 12 6 6 6 5 5 5 7 ...</span>
<span class="co">#&gt;  $ PRO.score_mnar_bl   : int  12 12 12 6 6 6 5 5 5 7 ...</span>
<span class="co">#&gt;  $ PRO.score_delta     : int  0 0 -4 0 0 -2 0 6 -1 0 ...</span>
<span class="co">#&gt;  $ PRO.score_mcar_delta: int  0 0 NA 0 0 -2 0 6 NA 0 ...</span>
<span class="co">#&gt;  $ PRO.score_mar_delta : int  0 NA NA 0 0 -2 0 6 NA 0 ...</span>
<span class="co">#&gt;  $ PRO.score_mnar_delta: int  0 0 -4 0 0 -2 0 6 -1 0 ...</span></code></pre></div>
</div>
<div id="compute-anchor-groups" class="section level2">
<h2 class="hasAnchor">
<a href="#compute-anchor-groups" class="anchor"></a>Compute anchor groups</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">COA34</span><span class="fu">::</span><span class="fu"><a href="../reference/compute_anchor_group.html">compute_anchor_group</a></span><span class="op">(</span>dat <span class="op">=</span> <span class="va">dat</span>,
                                   anchor.variable <span class="op">=</span> <span class="st">'PGIS_delta'</span><span class="op">)</span></code></pre></div>
</div>
<div id="compute-thresholds" class="section level2">
<h2 class="hasAnchor">
<a href="#compute-thresholds" class="anchor"></a>Compute Thresholds</h2>
<p>This functions computes a table of all of the meaningful change thresholds.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">thr</span> <span class="op">&lt;-</span> <span class="fu">COA34</span><span class="fu">::</span><span class="fu"><a href="../reference/compute_thresholds.html">compute_thresholds</a></span><span class="op">(</span>dat <span class="op">=</span> <span class="va">dat</span>,
                                 anchor.group <span class="op">=</span> <span class="st">'anchor.groups'</span>,
                                 time.var <span class="op">=</span> <span class="st">'Time'</span>,
                                 change.score <span class="op">=</span> <span class="st">'PRO.score_delta'</span><span class="op">)</span></code></pre></div>
<p>Output the table to include in the report:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">R2Word</span><span class="op">)</span>

<span class="fu">R2Word</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/R2Word/man/dump_df_mat_to_file.html">dump_df_mat_to_file</a></span><span class="op">(</span>out <span class="op">=</span> <span class="va">thr</span>,
                            table.title <span class="op">=</span> <span class="st">'Anchor Group Thresholds'</span>,
                            NA.string <span class="op">=</span> <span class="st">'-'</span>,
                            decimals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,
                            file.name <span class="op">=</span> <span class="st">'thr'</span>, 
                            print.dir <span class="op">=</span> <span class="va">print.dir</span><span class="op">)</span></code></pre></div>
<template id="511273d7-2651-433b-9030-39ed1e01c556"><style>
.tabwid table{
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-spacing: 0;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style>
<div class="tabwid">
<style>.cl-74b6f788{table-layout:auto;border-collapse:collapse;width:100%;}.cl-74ac7772{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-74ac7773{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-74ac9e64{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-74ac9e65{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-74acc54c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acc54d{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acc54e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acc54f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acc550{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acc551{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acc552{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acc553{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acc554{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acc555{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acc556{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acec3e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acec3f{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acec40{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acec41{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acec42{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acec43{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acec44{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acec45{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acec46{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acec47{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74acec48{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74ad1330{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74ad1331{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74ad1332{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74ad1333{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74ad1334{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74ad1335{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74ad1336{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-74ad1337{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table class="table cl-74b6f788">
<thead>
<tr style="overflow-wrap:break-word;"><td colspan="6" class="cl-74acec47"><p class="cl-74ac9e64"><span class="cl-74ac7772">Anchor Group Thresholds</span></p></td></tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-74ad1337"><p class="cl-74ac9e65"><span class="cl-74ac7772">PRO Change Score</span></p></td>
<td class="cl-74ad1335"><p class="cl-74ac9e65"><span class="cl-74ac7772">Anchor Group</span></p></td>
<td class="cl-74ad1334"><p class="cl-74ac9e65"><span class="cl-74ac7772">Mean</span></p></td>
<td class="cl-74ad1333"><p class="cl-74ac9e65"><span class="cl-74ac7772">Median</span></p></td>
<td class="cl-74ad1336"><p class="cl-74ac9e65"><span class="cl-74ac7772">N</span></p></td>
<td class="cl-74ad1332"><p class="cl-74ac9e65"><span class="cl-74ac7772">Percent</span></p></td>
</tr>
</thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-74acc551"><p class="cl-74ac9e65"><span class="cl-74ac7773">PRO.score_delta</span></p></td>
<td class="cl-74acc54e"><p class="cl-74ac9e65"><span class="cl-74ac7773">Improved, 2 or more categories</span></p></td>
<td class="cl-74acc550"><p class="cl-74ac9e65"><span class="cl-74ac7773">-4.38</span></p></td>
<td class="cl-74acc54f"><p class="cl-74ac9e65"><span class="cl-74ac7773">-4.00</span></p></td>
<td class="cl-74acc54d"><p class="cl-74ac9e65"><span class="cl-74ac7773">164</span></p></td>
<td class="cl-74acc54c"><p class="cl-74ac9e65"><span class="cl-74ac7773">16.4</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-74acc551"><p class="cl-74ac9e65"><span class="cl-74ac7773">PRO.score_delta</span></p></td>
<td class="cl-74acc54e"><p class="cl-74ac9e65"><span class="cl-74ac7773">Improved, 1 category</span></p></td>
<td class="cl-74acc550"><p class="cl-74ac9e65"><span class="cl-74ac7773">-2.04</span></p></td>
<td class="cl-74acc54f"><p class="cl-74ac9e65"><span class="cl-74ac7773">-2.00</span></p></td>
<td class="cl-74acc54d"><p class="cl-74ac9e65"><span class="cl-74ac7773">198</span></p></td>
<td class="cl-74acc54c"><p class="cl-74ac9e65"><span class="cl-74ac7773">19.8</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-74acc554"><p class="cl-74ac9e65"><span class="cl-74ac7773">PRO.score_delta</span></p></td>
<td class="cl-74acc556"><p class="cl-74ac9e65"><span class="cl-74ac7773">Maintained</span></p></td>
<td class="cl-74acc553"><p class="cl-74ac9e65"><span class="cl-74ac7773">-0.01</span></p></td>
<td class="cl-74acc555"><p class="cl-74ac9e65"><span class="cl-74ac7773">0.00</span></p></td>
<td class="cl-74acc552"><p class="cl-74ac9e65"><span class="cl-74ac7773">288</span></p></td>
<td class="cl-74acec3e"><p class="cl-74ac9e65"><span class="cl-74ac7773">28.8</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-74acc551"><p class="cl-74ac9e65"><span class="cl-74ac7773">PRO.score_delta</span></p></td>
<td class="cl-74acc54e"><p class="cl-74ac9e65"><span class="cl-74ac7773">Deteriorated, 1 category</span></p></td>
<td class="cl-74acc550"><p class="cl-74ac9e65"><span class="cl-74ac7773">2.03</span></p></td>
<td class="cl-74acc54f"><p class="cl-74ac9e65"><span class="cl-74ac7773">2.00</span></p></td>
<td class="cl-74acc54d"><p class="cl-74ac9e65"><span class="cl-74ac7773">199</span></p></td>
<td class="cl-74acc54c"><p class="cl-74ac9e65"><span class="cl-74ac7773">19.9</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-74acec44"><p class="cl-74ac9e65"><span class="cl-74ac7773">PRO.score_delta</span></p></td>
<td class="cl-74acec40"><p class="cl-74ac9e65"><span class="cl-74ac7773">Deteriorated, 2 or more categories</span></p></td>
<td class="cl-74acec43"><p class="cl-74ac9e65"><span class="cl-74ac7773">4.71</span></p></td>
<td class="cl-74acec3f"><p class="cl-74ac9e65"><span class="cl-74ac7773">5.00</span></p></td>
<td class="cl-74acec41"><p class="cl-74ac9e65"><span class="cl-74ac7773">151</span></p></td>
<td class="cl-74acec42"><p class="cl-74ac9e65"><span class="cl-74ac7773">15.1</span></p></td>
</tr>
</tbody>
</table>
</div></template><div class="flextable-shadow-host" id="da1b74c6-4558-4d48-90cf-d1801304a982"></div>
<script>
var dest = document.getElementById("da1b74c6-4558-4d48-90cf-d1801304a982");
var template = document.getElementById("511273d7-2651-433b-9030-39ed1e01c556");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>
</div>
<div id="compute-proportion-surpassing-threshold" class="section level2">
<h2 class="hasAnchor">
<a href="#compute-proportion-surpassing-threshold" class="anchor"></a>Compute Proportion Surpassing Threshold</h2>
<p>NB, 12.16.21: Not run - not sure how useful this function is.</p>
<p>This function computes the proportion of subjects surpassing a given threshold. So let’s say you are looking to estimate meaningful improvement, using a 1-category change on the anchor as the criteria. In this case, you’d use the median PRO score of the anchor group “Improved 1 category” and compute the proportion of subjects with a PRO change score that was that or less (assuming that improvement is negative in PRO change scores).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">cap</span> <span class="op">&lt;-</span> <span class="fu">COA34</span><span class="fu">::</span><span class="fu"><a href="../reference/compute_prop_surp.html">compute_prop_surp</a></span><span class="op">(</span>dat <span class="op">=</span> <span class="va">dat</span>,
                                anchor.group <span class="op">=</span> <span class="st">'anchor.groups'</span>,
                                time.var <span class="op">=</span> <span class="st">'Time'</span>,
                                change.score <span class="op">=</span> <span class="st">'Y_comp_delta'</span>,
                                threshold.label <span class="op">=</span> <span class="st">'Improved_1'</span>,
                                mean.or.median <span class="op">=</span> <span class="st">'median'</span><span class="op">)</span>



<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">R2Word</span><span class="op">)</span>

<span class="fu">R2Word</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/R2Word/man/dump_df_mat_to_file.html">dump_df_mat_to_file</a></span><span class="op">(</span>out <span class="op">=</span> <span class="va">cap</span><span class="op">$</span><span class="va">anchor.table</span>,
                            table.title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">'Proportion Achieving Meaningful Improvement in '</span>, <span class="va">cap</span><span class="op">$</span><span class="va">change.score</span><span class="op">)</span>,
                            NA.string <span class="op">=</span> <span class="st">'-'</span>,
                            table.footnote <span class="op">=</span> <span class="va">cap</span><span class="op">$</span><span class="va">footnote.anchor.table</span>,
                            decimals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,
                            file.name <span class="op">=</span> <span class="st">'cap'</span>, 
                            print.dir <span class="op">=</span> <span class="va">print.dir</span><span class="op">)</span></code></pre></div>
</div>
<div id="plot-ecdfs-and-epdfs" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-ecdfs-and-epdfs" class="anchor"></a>Plot eCDFs and ePDFs</h2>
<p>We’re going to do this two ways, first the easy way, with a function that automates it. Then we will go and do it by hand, to give you code to customize.</p>
<p>This way, if the function doesn’t give you exactly what you need, you have something to modify and can quickly get what you need.</p>
<div id="easy-way---use-the-function" class="section level3">
<h3 class="hasAnchor">
<a href="#easy-way---use-the-function" class="anchor"></a>Easy Way - Use the function</h3>
<p>This is the most expedient approach. You can use this if you have 200 eCDF/ePDFs to compute.</p>
<p>NB, 12.16.21: function <code>ggplot2_eCDF</code> is deprecated, using <code>ggplot2_eCDF_v2</code> instead.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">ecdf</span> <span class="op">&lt;-</span> <span class="fu">COA34</span><span class="fu">::</span><span class="fu"><a href="../reference/ggplot2_eCDF_v2.html">ggplot2_eCDF_v2</a></span><span class="op">(</span>dat <span class="op">=</span> <span class="va">dat</span>,
                       anchor.group <span class="op">=</span> <span class="st">'anchor.groups'</span>,
                       time.var <span class="op">=</span> <span class="st">'Time'</span>,
                       change.score <span class="op">=</span> <span class="st">'PRO.score_delta'</span><span class="op">)</span>


<span class="va">epdf</span> <span class="op">&lt;-</span> <span class="fu">COA34</span><span class="fu">::</span><span class="fu"><a href="../reference/ggplot2_ePDF.html">ggplot2_ePDF</a></span><span class="op">(</span>dat <span class="op">=</span> <span class="va">dat</span>,
                       anchor.group <span class="op">=</span> <span class="st">'anchor.groups'</span>,
                       time.var <span class="op">=</span> <span class="st">'Time'</span>,
                       change.score <span class="op">=</span> <span class="st">'PRO.score_delta'</span><span class="op">)</span>

<span class="co"># Let's look at them:</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">ecdf</span><span class="op">)</span></code></pre></div>
<p><img src="a06_Vignette_MWPC_files/figure-html/plot_funct_1-1.png" width="700"></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">epdf</span><span class="op">)</span></code></pre></div>
<p><img src="a06_Vignette_MWPC_files/figure-html/plot_funct_1-2.png" width="700"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Plot both:</span>
<span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span><span class="op">(</span><span class="va">ecdf</span>, <span class="va">epdf</span>, ncol <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<p><img src="a06_Vignette_MWPC_files/figure-html/plot_funct_1-3.png" width="700"></p>
<p>Note that you can chooose to compute the kernel density for the eCDF if you want some smoothed eCDFs. These eCDFs will have lines that don’t overlap as much so it’s easier to review and interpret the eCDF. This kernel density is the same as the one used to plot the ePDFs.</p>
<p>The default is <code>smoothed.ecdf = FALSE</code>. Set it equal to <code>TRUE</code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">ecdf.smoothed</span> <span class="op">&lt;-</span> <span class="fu">COA34</span><span class="fu">::</span><span class="fu"><a href="../reference/ggplot2_eCDF_v2.html">ggplot2_eCDF_v2</a></span><span class="op">(</span>dat <span class="op">=</span> <span class="va">dat</span>,
                       smoothed.ecdf <span class="op">=</span> <span class="cn">TRUE</span>,
                       anchor.group <span class="op">=</span> <span class="st">'anchor.groups'</span>,
                       time.var <span class="op">=</span> <span class="st">'Time'</span>,
                       change.score <span class="op">=</span> <span class="st">'PRO.score_delta'</span><span class="op">)</span>

<span class="co"># Compare the two:</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">ecdf</span><span class="op">)</span></code></pre></div>
<p><img src="a06_Vignette_MWPC_files/figure-html/plot_funct_2-1.png" width="700"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">ecdf.smoothed</span><span class="op">)</span></code></pre></div>
<p><img src="a06_Vignette_MWPC_files/figure-html/plot_funct_2-2.png" width="700"></p>
<p>The plots do not render well in a browser. We should print them out to a file instead.</p>
</div>
<div id="print-out-the-ecdfs" class="section level3">
<h3 class="hasAnchor">
<a href="#print-out-the-ecdfs" class="anchor"></a>Print out the eCDFs</h3>
<p>Print out the ggplot2 plots to a .png file. You could do this in a loop if you had many figures to print out.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co">#---------------------------------</span>
<span class="co"># Print out separately:</span>

<span class="va">file.name</span> <span class="op">&lt;-</span> <span class="st">'Example_eCDF'</span>

<span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">png</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">file.name</span>, <span class="st">'.png'</span><span class="op">)</span>, units<span class="op">=</span><span class="st">"in"</span>, width<span class="op">=</span><span class="fl">11</span>, height<span class="op">=</span><span class="fl">8.5</span>, res<span class="op">=</span><span class="fl">300</span><span class="op">)</span>

  <span class="va">ecdf</span>

<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span>

<span class="co">#-------------------------------</span>

<span class="va">file.name</span> <span class="op">&lt;-</span> <span class="st">'Example_eCDF_smoothed'</span>

<span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">png</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">file.name</span>, <span class="st">'.png'</span><span class="op">)</span>, units<span class="op">=</span><span class="st">"in"</span>, width<span class="op">=</span><span class="fl">11</span>, height<span class="op">=</span><span class="fl">8.5</span>, res<span class="op">=</span><span class="fl">300</span><span class="op">)</span>

  <span class="va">ecdf.smoothed</span>

<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span>

<span class="co">#-------------------------------</span>

  <span class="va">file.name</span> <span class="op">&lt;-</span> <span class="st">'Example_ePDF'</span>

<span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">png</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">file.name</span>, <span class="st">'.png'</span><span class="op">)</span>, units<span class="op">=</span><span class="st">"in"</span>, width<span class="op">=</span><span class="fl">11</span>, height<span class="op">=</span><span class="fl">8.5</span>, res<span class="op">=</span><span class="fl">300</span><span class="op">)</span>

  <span class="va">epdf</span>

<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span>
<span class="co"># Note: you can use the paste0 function to use this in a loop</span>
<span class="co"># update anchor_name in the loop</span>
<span class="co"># file.name = paste0('eCDF_ePDF', anchor_name)</span>


<span class="co">#---------------------------------------------------</span>
<span class="co"># Print out together:</span>
  
  <span class="va">file.name</span> <span class="op">&lt;-</span> <span class="st">'Example_stacked_eCDF_ePDF'</span>

<span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">png</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">file.name</span>, <span class="st">'.png'</span><span class="op">)</span>, units<span class="op">=</span><span class="st">"in"</span>, width<span class="op">=</span><span class="fl">11</span>, height<span class="op">=</span><span class="fl">8.5</span>, res<span class="op">=</span><span class="fl">300</span><span class="op">)</span>

  <span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span><span class="op">(</span><span class="va">ecdf</span>, <span class="va">epdf</span>, ncol <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div id="shell-figures" class="section level4">
<h4 class="hasAnchor">
<a href="#shell-figures" class="anchor"></a>Shell Figures</h4>
<p>There’s an option to return shell figures - this just means the sample sizes are xx-ed out. This is a nice option if you have to put together a proposal that contains shell figures and tables.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ecdf</span><span class="op">&lt;-</span> <span class="fu">COA34</span><span class="fu">::</span><span class="fu"><a href="../reference/ggplot2_eCDF_v2.html">ggplot2_eCDF_v2</a></span><span class="op">(</span>dat <span class="op">=</span> <span class="va">dat</span>,
                       shell.table <span class="op">=</span> <span class="cn">TRUE</span>,
                       anchor.group <span class="op">=</span> <span class="st">'anchor.groups'</span>,
                       time.var <span class="op">=</span> <span class="st">'Time'</span>,
                       change.score <span class="op">=</span> <span class="st">'PRO.score_delta'</span><span class="op">)</span>


<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">ecdf</span><span class="op">)</span></code></pre></div>
<p><img src="a06_Vignette_MWPC_files/figure-html/plot_shell-1.png" width="700"></p>
</div>
</div>
<div id="custom-ecdf" class="section level3">
<h3 class="hasAnchor">
<a href="#custom-ecdf" class="anchor"></a>Custom eCDF</h3>
<p>You may want to create a custom plot. There may be one or two scores that are the focus of your report, and for those, you need to make customized modifications.</p>
<p>If you want, you can always pull the R code that is inside these COA34 functions and customize that code to make it look the way you want.</p>
<p>However, the nice thing about ggplot2 objects is how you can just add to it. Let’s say you want to add a dashed line representing the threshold of deterioration to your eCDF. That is easy to do:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu">COA34</span><span class="fu">::</span><span class="fu"><a href="../reference/ggplot2_eCDF_v2.html">ggplot2_eCDF_v2</a></span><span class="op">(</span>dat <span class="op">=</span> <span class="va">dat</span>,
                       anchor.group <span class="op">=</span> <span class="st">'anchor.groups'</span>,
                       time.var <span class="op">=</span> <span class="st">'Time'</span>,
                       change.score <span class="op">=</span> <span class="st">'PRO.score_delta'</span><span class="op">)</span>


<span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">p1</span> <span class="op">+</span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>
  xintercept <span class="op">=</span> <span class="va">thr</span><span class="op">$</span><span class="va">Median</span><span class="op">[</span><span class="va">thr</span><span class="op">$</span><span class="va">`Anchor Group`</span> <span class="op">==</span> <span class="st">'Deteriorated, 1 category'</span><span class="op">]</span>,
  linetype <span class="op">=</span> <span class="st">'dashed'</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">p1</span><span class="op">)</span></code></pre></div>
<p><img src="a06_Vignette_MWPC_files/figure-html/plot_custom_ecdf_1-1.png" width="700"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Charlie Iaconangelo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
